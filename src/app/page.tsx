"use client";

import {
    Carousel,
    CarouselContent,
    CarouselItem,
    CarouselNext,
    CarouselPrevious,
    type CarouselApi,
} from "@/components/ui/carousel";
import { db } from "@/firebase/config";
import { cn } from "@/lib/utils";
import { NewsT } from "@/models/news";
import Autoplay from "embla-carousel-autoplay";
import { collection, getDocs, limit, orderBy, query } from "firebase/firestore";
import { GraduationCap ,Backpack , Star,BookOpenText , Phone, FileSearch, Landmark, DollarSign } from "lucide-react";
import { useRouter } from "next/navigation";
import { useEffect, useRef, useState } from "react";
import { Parallax } from "react-scroll-parallax";
import { useIntersectionObserver as useVisibility } from "usehooks-ts";
import { Header, Headers } from "../models/headerItem";
import { Profiles } from "../models/profile";
import { AboutItem, AboutItems } from "@/models/about";
import { Reason, Reasons } from "../models/reason";
import { Element } from "react-scroll";
import Link from "next/link";

const headerItems: Headers = [
    {
        link: "/apply",
        background: "/appliance.png",
    },
    {
        link: "",
        background: "/sundayCollege.png",
    },
];
const aboutItems: AboutItems = [
    {
        
        icon: <Star />,
        title: "üéØ–ù–∞—à–∞—Ç–∞ –º–∏—Å–∏—è",
        description:
            " –ù–∏–µ —Å–ø–æ–¥–µ–ª—è–º–µ  –∏–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏ –∑–Ω–∞–Ω–∏—è –∏ –∏—Å–∫–∞–º–µ –¥–∞ –≤–¥—ä—Ö–Ω–æ–≤—è–≤–∞–º–µ —Å—ä—Å —Å—Ç—Ä–∞—Å—Ç –∑–∞ –∫–∞—Ä–∏–µ—Ä–Ω–æ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–∞–Ω–µ –º–ª–∞–¥–∏ —Ö–æ—Ä–∞ –∑–∞ –±–∏–∑–Ω–µ—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è. –ù–∏–µ –æ—Ç–≤–∞—Ä—è–º–µ –≤—Ä–∞—Ç–∏ –∑–∞ –ª–∏—á–µ–Ω –∏ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω —É—Å–ø–µ—Ö, —Å—ä–∑–¥–∞–≤–∞–π–∫–∏ –±–∏–∑–Ω–µ—Å –∫—É–ª—Ç—É—Ä–∞."
        },
    {
        
        icon: <BookOpenText />,
        title: "üéØ–ù–∞—à–∞—Ç–∞ –º–∏—Å–∏—è",
        description:
            "–ü—Ä–µ–¥–ª–∞–≥–∞–Ω–æ—Ç–æ –æ—Ç –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞–¥–≥—Ä–∞–∂–¥–∞ –¥—ä—Ä–∂–∞–≤–Ω–∏—Ç–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–Ω–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏ –ø–æ –æ–±—â–æ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–Ω–∞, –∑–Ω–∞–Ω–∏—è—Ç–∞ –ø–æ –æ–±—â–æ–ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∞, –æ—Ç—Ä–∞—Å–ª–æ–≤–∞ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞. –°—ä–∑–¥–∞–≤–∞–º–µ –º–æ—Ç–∏–≤–∏ –∑–∞ —É—á–µ–Ω–µ, —É–º–µ–Ω–∏—è –∑–∞ —Å–ø—Ä–∞–≤—è–Ω–µ –ø—Ä–∏ —Ç—Ä—É–¥–Ω–∏ —É—á–µ–±–Ω–∏ –∏ –∂–∏—Ç–µ–π—Å–∫–∏ —Å–∏—Ç—É–∞—Ü–∏–∏ ,—Ñ–æ—Ä–º–∏—Ä–∞–º–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ –∏ –∏–∑–≥—Ä–∞–∂–¥–∞–º–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∑–∞ —Å—ä—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –Ω–∞ –æ–±—É—á–∞–µ–º–∏—Ç–µ –º–ª–∞–¥–µ–∂–∏.",
    },
    {
      
        icon: <GraduationCap />,
        title: "üåü–ù–∞—à–∞—Ç–∞ –≤–∏–∑–∏—è",
        description:
            "–†–∞–±–æ—Ç–∏–º –µ–∑–∏–∫–æ–≤–æ—Ç–æ –æ–±—É—á–µ–Ω–∏–µ –ø–æ –Ω–∏–≤–∞, —Å—ä–≥–ª–∞—Å–Ω–æ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∞—Ç–∞ –µ–∑–∏–∫–æ–≤–∞ —Ä–∞–º–∫–∞. –ü—Ä–æ–≤–µ–∂–¥–∞–º–µ —É—á–µ–±–Ω–∞—Ç–∞ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤ –±–∞–Ω–∫–æ–≤–∏ –∫–∞–Ω—Ç–æ—Ä–∏ –∏ —É—á–∏–ª–∏—â–µ, –∞ –≤ —Ä–µ–∞–ª–Ω–∞ —Å—Ä–µ–¥–∞ —Å—Ç–∞–∂–æ–≤–µ –≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∏ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è. –†–µ–¥–æ–≤–Ω–æ —Å—Ä–µ—â–∞–º–µ —É—á–µ–Ω–∏—Ü–∏—Ç–µ —Å —Ö–æ—Ä–∞, —É—Å–ø–µ–ª–∏ –¥–∞ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞—Ç —Å–µ–±–µ —Å–∏ –∫–∞—Ç–æ —É—Å–ø–µ—à–Ω–∏ –ª–∏–¥–µ—Ä–∏ –Ω–∞ —Ñ–∏—Ä–º–∏.",
    },
    {
        
        icon: <Backpack  />,
        title: "üåü–ù–∞—à–∞—Ç–∞ –≤–∏–∑–∏—è",
        description:
            "–û—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞—Ç —Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –ø–æ –º–µ—Ç–æ–¥–∞ –Ω–∞ ‚Äû–ø—Ä–µ–∂–∏–≤—è–≤–∞–Ω–µ—Ç–æ‚Äú –∏ —Å–µ —Ä–∞–±–æ—Ç–∏ —Å —É—á–µ–Ω–∏—Ü–∏—Ç–µ –ø–æ —Ä–∞–∑–ª–∏—á–Ω–∏ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏ –Ω–∞ –∏–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞, –µ–∫–æ–ª–æ–≥–∏—á–Ω–∞ –∏ —Å–æ—Ü–∏–∞–ª–Ω–∞ —Ç–µ–º–∞—Ç–∏–∫–∞. –ï–∂–µ–º–µ—Å–µ—á–Ω–æ —Å–µ –ø–æ—Å–µ—â–∞–≤–∞—Ç –∫—É–ª—Ç—É—Ä–Ω–∏ –∏–Ω—Å—Ç–∏—Ç—É—Ü–∏–∏ –∫–∞—Ç–æ –º—É–∑–µ–∏,—Ç–µ–∞—Ç—Ä–∞–ª–Ω–∏ –∏ –æ–ø–µ—Ä–Ω–∏ —Å–ø–µ–∫—Ç–∞–∫–ª–∏, –∏–∑–ª–æ–∂–±–∏ –∏ —Å—Ä–µ—â–∞–º–µ –±—ä–¥–µ—â–∏—Ç–µ –º–ª–∞–¥–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∏ —Å –∏–∑—è–≤–µ–Ω–∏ —Ç–≤–æ—Ä—Ü–∏.",
    },
];
const selectReasons: Reasons = [
    {
        title: "–ì–ª–æ–±–∞–ª–Ω–∏ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏:",
        description: `–û—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–π–∫–∏ —Å—Ç–∞–∂–æ–≤–µ –≤ —á—É–∂–±–∏–Ω–∞, –Ω–∏–µ —Å–±—ä–¥–≤–∞–º–µ –º–µ—á—Ç–∏—Ç–µ –∑–∞ —Ä–∞–±–æ—Ç–∞ –ø–æ –∏–∑–±—Ä–∞–Ω–∞ –ø—Ä–æ—Ñ–µ—Å–∏—è. –ù–µ—â–æ –ø–æ–≤–µ—á–µ, –¥–∞–≤–∞–º–µ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –ø—Ä–∏–¥–æ–±–∏–≤–∞–Ω–µ –Ω–∞ —Ç—Ä—É–¥–æ–≤ –æ–ø–∏—Ç –Ω–∞ –µ–≤—Ä–æ–ø–µ–π—Å–∫–æ –Ω–∏–≤–æ. –û—Å–≤–µ–Ω —Ç–æ–≤–∞ —É—á–∏–º —É—á–µ–Ω–∏—Ü–∏—Ç–µ –¥–∞ –±—ä–¥–∞—Ç –æ—Ç–≥–æ–≤–æ—Ä–Ω–∏, –æ—Ç–∫—Ä–∏—Ç–∏ –∏ —Å—ä–≤–µ—Å—Ç–Ω–∏ –∏ –∏–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è–º–µ —à–∞–Ω—Å –¥–∞ —Å—ä–∑–¥–∞–¥–∞—Ç –Ω–æ–≤–∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∏ –∑–∞–ø–æ–∑–Ω–∞–Ω—Å—Ç–≤–∞ –∏ –¥–∞ –æ–ø–æ–∑–Ω–∞—è—Ç –¥—Ä—É–≥–∏ –∫—É–ª—Ç—É—Ä–∏.`,
    },
    {
        title: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª–µ–Ω –ø–æ–¥—Ö–æ–¥ –∫—ä–º –æ–±—É—á–µ–Ω–∏–µ—Ç–æ:",
        description:
            "–ò—Å–∫–∞–º–µ –Ω–∞—à–∏—Ç–µ —É—á–µ–Ω–∏—Ü–∏ –¥–∞ –ø–æ–¥–æ–±—Ä—è—Ç —Å–≤–æ–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏, –µ–∑–∏–∫–æ–≤–∏ –∏ —Å–æ—Ü–∏–∞–ª–Ω–∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏. –ó–∞ –¥–∞ —É–ª–µ—Å–Ω–∏–º —Ç–æ–≤–∞, –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞–º–µ, —á–µ –æ–±—É—á–µ–Ω–∏–µ—Ç–æ —Å–µ –ø—Ä–æ–≤–µ–∂–¥–∞ –≤ –º–∞–ª–∫–∏ –∫–ª–∞—Å–æ–≤–µ –∏ —Å—ä–æ–±—Ä–∞–∑–Ω–æ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏—Ç–µ –Ω–∞ —É—á–µ–Ω–∏—Ü–∏—Ç–µ –ø—Ä–∏–ª–∞–≥–∞–º–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–Ω–∏ –ø–æ–¥—Ö–æ–¥–∏.",
    },
    {
        title: "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞ –±–∏–∑–Ω–µ—Å —É—Å–ø–µ—Ö:",
        description:
            "–ù–∏–µ —Å–ø–æ–¥–µ–ª—è–º–µ  –∏–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏ –∑–Ω–∞–Ω–∏—è –∏ –≤–¥—ä—Ö–Ω–æ–≤—è–≤–∞–º–µ —Å—ä—Å —Å—Ç—Ä–∞—Å—Ç –∑–∞ –∫–∞—Ä–∏–µ—Ä–Ω–æ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–æ –º–ª–∞–¥–µ–∂–∫–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–∞–Ω–µ –∑–∞ –±–∏–∑–Ω–µ—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.–ù–∞–¥–≥—Ä–∞–∂–¥–∞–º–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏ –ø–æ –æ–±—â–æ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —É—á–∏–º  –Ω–∞  –∑–Ω–∞–Ω–∏—è –∏ —É–º–µ–Ω–∏—è –∑–∞ —Å–ø—Ä–∞–≤—è–Ω–µ –ø—Ä–∏ —Ç—Ä—É–¥–Ω–∏ —É—á–µ–±–Ω–∏ –∏ –∂–∏—Ç–µ–π—Å–∫–∏ —Å–∏—Ç—É–∞—Ü–∏–∏.",
    },
];
const profiles: Profiles = [
    {
        type: "–î–∞–Ω—ä—á–µ–Ω –∏ –º–∏—Ç–Ω–∏—á–µ—Å–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª",
        image: "bg-[url('/borderControl.jpg')]",
        icon:<FileSearch size={40} className="border-4 border-white rounded-full p-1 self-start"/>,
        pdf: "/pdfs/borderAdmin.pdf",
    },
    {
        type: "–ë–∞–Ω–∫–æ–≤–æ –¥–µ–ª–æ",
        image: "bg-[url('/bank.jpg')]",
        icon: <Landmark size={40} className="border-4 border-white rounded-full p-1 self-start"/>,
        pdf: "/pdfs/banker.pdf",
    },
    {
        type: "–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ —Å—á–µ—Ç–æ–≤–æ–¥—Å—Ç–≤–æ",
        image: "bg-[url('/accountant.jpg')]",
        icon: <DollarSign size={40} className="border-4 border-white rounded-full "/>,
        pdf: "/pdfs/accountant.pdf",
    },
];

export default function Home() {
    return (
        <main className="flex min-h-screen w-full flex-col items-center justify-center">
            <Element name="home" className="w-full">
                <HeroSection />
            </Element>
            <Element name="about" className="w-full">
                <AboutSection />
            </Element>
            <Element name="news" className="w-full">
                <NewsSection />
            </Element>
            <Element name="select" className="w-full">
                <SelectSection />
            </Element>
            <Element name="programs" className="w-full">
                <ProfilesSection />
            </Element>
            <Element name="contact" className="w-full">
                <ContactSection />
            </Element>
        </main>
    );
}

const HeroSection: React.FC = () => {
    const [carouselApi, setApi] = useState<CarouselApi | undefined>();
    const [activeIndex, setActiveIndex] = useState(0);

    useEffect(() => {
        if (carouselApi) {
            carouselApi.scrollTo(activeIndex);
        }
        carouselApi?.on("select", () => {
            setActiveIndex(carouselApi.selectedScrollSnap());
        });
    }, [activeIndex, carouselApi]);

    return (
        <section className="relative flex w-full items-center justify-between gap-5">
            <Carousel
                setApi={setApi}
                className="h-fit w-full"
                opts={{
                    loop: true,
                }}
                plugins={[
                    Autoplay({
                        delay: 10000,
                    }),
                ]}
            >
                <CarouselContent className="h-fit">
                    {headerItems.map((item, index) => (
                        <CarouselItem
                            key={index}
                            className={cn(
                                "w-full border-b-[20px] border-sky-500 lg:border-b-[44px]",
                            )}
                        >
                            <CarouselHeaderItemContent
                                key={index}
                                background={item.background}
                                link={item.link}
                            />
                        </CarouselItem>
                    ))}
                </CarouselContent>
            </Carousel>
            <div className="space-between absolute bottom-2 left-[50%] flex w-fit translate-x-[-50%] gap-2 drop-shadow-xl lg:bottom-6">
                {carouselApi?.scrollSnapList().map((_: any, index: number) => (
                    <div
                        key={index}
                        className={cn(
                            "h-2 w-2 cursor-pointer rounded-full bg-white",
                            index === activeIndex && "bg-blue-800",
                        )}
                        onClick={() => {
                            setActiveIndex(index);
                        }}
                    />
                ))}
            </div>
        </section>
    );
};
const CarouselHeaderItemContent: React.FC<Header> = ({ link, background }) => {
    const router = useRouter();
    return (
        <img
            src={background}
            onClick={() => {
                router.push(link);
            }}
            className={cn("max-h-[81vh] w-full cursor-pointer object-cover")}
        />
    );
};
const AboutSection: React.FC = () => {
    const [carouselApi, setApi] = useState<CarouselApi | undefined>();
    const [activeIndex, setActiveIndex] = useState(0);

    useEffect(() => {
        if (carouselApi) {
            carouselApi.scrollTo(activeIndex);
        }
        carouselApi?.on("select", () => {
            setActiveIndex(carouselApi.selectedScrollSnap());
        });
    }, [activeIndex, carouselApi]);
    
    // const reorderItems = () => {
    //     const middleIndex = Math.floor(aboutItems.length / 2);
    //     const offset = activeIndex - middleIndex;
    //     return [...aboutItems.slice(offset), ...aboutItems.slice(0, offset)];
    // };

    return (
        <section className="flex h-[500px] flex-col w-full items-center justify-start gap-5 bg-gradient-to-b from-sky-500 from-50% to-100% to-white">
            <h2 className="text-white text-7xl font-bold underline decoration-4 underline-offset-4">–ó–∞ –Ω–∞—Å</h2>
            <div className="w-3/4 flex h-fit justify-center items-center">
            <Carousel
                setApi={setApi}
                orientation="vertical"
                opts={{
                    loop: true,
                }}
                plugins={[
                    Autoplay({
                        delay: 4000,
                    }),
                ]}
                className="w-[1000px]"
            >
                <CarouselContent className="mt-1 h-[300px]">
                    {aboutItems.map((item, index) => (
                        <CarouselItem
                            key={index}
                            className="w-full p-5 flex items-center justify-center border-r "
                        >
                            <CarouselAboutItemContent
                                title={item.title}
                                description={item.description}
                                icon={item.icon}
                                key={index}
                            />
                        </CarouselItem>
                    ))}
                </CarouselContent>
            </Carousel>

                <div className="w-fit flex flex-col justify-center items-center p-4 gap-3 min-w-40">
                {aboutItems.map((item,index) => (
                    <div
                        key={index}
                        className={cn(
                            "flex h-16 w-16 cursor-pointer items-center justify-center rounded-full bg-blue-500 text-white transition-all",
                            index === activeIndex && "bg-blue-600 scale-110",
                        )}
                    
                        onClick={() => {
                            setActiveIndex(index);
                        }}
                    >
                        {item.icon}
                    </div>
                ))}
                </div>
            </div>
        </section>
    );
};
const CarouselAboutItemContent: React.FC<AboutItem> = ({
    title,
    description,
}) => {
    return (
        <div className="flex h-full w-fit flex-col justify-center p-2 text-white">
             <p className="text-5xl font-bold">{title}</p>
            <p className="text-2xl">{description}</p>
        </div>
    );
};
const NewsSection: React.FC = () => {
    const [carouselApi, setApi] = useState<CarouselApi | undefined>();
    const [activeIndex, setActiveIndex] = useState(0);
    const carouselRef = useRef<HTMLDivElement | null>(null);
    const isCarouselVisible = !!useVisibility(carouselRef, {})?.isIntersecting;
    const [news, setNews] = useState<NewsT[]>([]);
    useEffect(() => {
        if (carouselApi) {
            carouselApi.scrollTo(activeIndex);
        }
        carouselApi?.on("select", () => {
            setActiveIndex(carouselApi.selectedScrollSnap());
        });
    }, [activeIndex, carouselApi]);

    useEffect(() => {
        async function getNews() {
            const q = query(
                collection(db, "news"),
                orderBy("createdAt", "desc"),
                limit(5),
            );
            const querySnapshot = await getDocs(q);
            let tempNews: NewsT[] = [];
            querySnapshot.forEach((doc) => {
                tempNews.push(doc.data() as NewsT);
            });
            setNews(tempNews);
        }
        getNews();
    }, []);

    return (
        <section className="flex h-fit w-full flex-col items-center justify-center gap-2 bg-white p-5 sm:min-h-fit sm:max-lg:p-20">
            <h1 className="font-geologica text-5xl underline decoration-4 sm:text-7xl text-cyan-900">
                –ù–æ–≤–∏–Ω–∏
            </h1>

            <Carousel
                ref={carouselRef}
                setApi={setApi}
                className={cn(
                    "w-full animate-delay-300",
                    isCarouselVisible && "animate-fade-down",
                )}
                opts={{
                    loop: true,
                }}
                plugins={[
                    Autoplay({
                        delay: 4000,
                    }),
                ]}
            >
                <CarouselContent className="-ml-1">
                    {news.map((item, index) => (
                        <CarouselItem
                            key={index}
                            className="p-4 pl-1 md:basis-1/2 lg:basis-1/3"
                        >
                            <CarouselNewsItemContent
                                title={item.title}
                                description={item.description}
                                image={item.image}
                                key={index}
                            />
                        </CarouselItem>
                    ))}
                </CarouselContent>
                <CarouselPrevious className=" hidden h-12 w-12 bg-black bg-opacity-60 text-white shadow-xl backdrop-blur-sm sm:flex lg:translate-x-20" />
                <CarouselNext className="hidden h-12 w-12 bg-black bg-opacity-60 text-white shadow-xl backdrop-blur-sm sm:flex lg:-translate-x-20" />
            </Carousel>

            <div className="space-between flex w-fit gap-2 sm:hidden">
                {carouselApi?.scrollSnapList().map((_: any, index: number) => (
                    <div
                        key={index}
                        className={`h-3 w-3 cursor-pointer rounded-full bg-gray-400 ${
                            index === activeIndex && "bg-slate-800"
                        }`}
                        onClick={() => {
                            setActiveIndex(index);
                        }}
                    />
                ))}
            </div>
        </section>
    );
};
const CarouselNewsItemContent: React.FC<NewsT> = ({
    title,
    description,
    image,
}) => (
    <div
        className="h-full min-h-[450px] w-full bg-cover bg-center"
        style={{ backgroundImage: `url(${image})` }}
    >
        <div className="flex h-full w-full flex-col justify-end border-sky-500 bg-opacity-30 bg-gradient-to-t from-black to-transparent to-70% p-4 text-white transition-all hover:border-b-8 hover:to-80% sm:to-50%">
            <p className="text-4xl">{title}</p>
            <p>{description}</p>
        </div>
    </div>
);
const SelectSection: React.FC = () => {
    const [progress, setProgress] = useState(0);
    const sectionBoxRef = useRef<HTMLDivElement | null>(null);
    const aboutTitleRef = useRef<HTMLHeadingElement | null>(null);
    const isAboutTitleVisible = !!useVisibility(aboutTitleRef, {})
        ?.isIntersecting;
    const isSectionBoxRefFVisible = !!useVisibility(sectionBoxRef, {
        threshold: 0.95,
    })?.isIntersecting;
    const [carouselApi, setApi] = useState<CarouselApi>();

    useEffect(() => {
        if (carouselApi) {
            carouselApi.scrollTo(Math.floor(progress * 3));
        }
    }, [progress]);
    return (
        <Parallax onProgressChange={(progress) => setProgress(progress)}>
            <section
                className={cn(
                    "max-w-screen relative h-fit min-h-[400vh] w-screen bg-white bg-gradient-to-r transition-colors duration-1000",
                    isSectionBoxRefFVisible &&
                        "bg-slate-600 text-white mix-blend-difference",
                    progress > 0 &&
                        progress < 0.33 &&
                        isSectionBoxRefFVisible &&
                        "bg-sky-600",
                    progress >= 0.33 && progress < 0.66 && "bg-blue-600",
                    progress >= 0.66 && progress < 1 && "bg-indigo-700",
                    progress > 0.75 && "bg-slate-600",
                )}
            >
                <div className="absolute h-full w-1/4  -skew-x-[5deg] bg-white mix-blend-overlay sm:-skew-x-[7deg] md:-skew-x-[10deg] lg:-skew-x-[15deg]  2xl:-skew-x-[20deg]" />
                <div
                    ref={sectionBoxRef}
                    className={cn(
                        "z-3 sticky top-0 flex h-screen flex-col justify-center bg-transparent",
                        progress > 0.5 && "text-white",
                    )}
                >
                    <h3
                        ref={aboutTitleRef}
                        className={cn(
                            "text-center text-3xl shadow-black drop-shadow-xl sm:text-5xl md:text-7xl lg:text-8xl",
                            isAboutTitleVisible && "animate-fade-down",
                        )}
                    >
                        –ó–∞—â–æ –¥–∞ –∏–∑–±–µ—Ä–µ—Ç–µ –Ω–∞—Å?
                    </h3>
                    <Carousel
                        setApi={setApi}
                        opts={{
                            watchDrag: false,
                        }}
                    >
                        <CarouselContent className="h-[500px]">
                            {selectReasons.map((item, index) => (
                                <CarouselItem
                                    key={index}
                                    className={cn(
                                        "flex scale-90 items-center justify-center transition-transform duration-1000",
                                        isSectionBoxRefFVisible && "scale-100",
                                    )}
                                >
                                    <CarouselSelectItemContent
                                        title={item.title}
                                        description={item.description}
                                        className={cn(
                                            "flex w-3/4 flex-col justify-center bg-slate-900 p-8 text-center text-white drop-shadow-[-35px_-35px_rgba(0,0,0,0.25)] transition-colors duration-500",
                                            isSectionBoxRefFVisible &&
                                                "bg-white  text-slate-800",
                                        )}
                                    />
                                </CarouselItem>
                            ))}
                        </CarouselContent>
                    </Carousel>
                </div>
            </section>
        </Parallax>
    );
};
const CarouselSelectItemContent: React.FC<Reason> = ({
    title,
    description,
    className,
}) => (
    <div className={className}>
        <h3 className="text-xl font-bold sm:text-2xl md:text-4xl lg:text-6xl">
            {title}
        </h3>

        <p className="text-md sm:text-1xl md:text-2xl lg:text-3xl">
            {description}
        </p>
    </div>
);
const ProfilesSection: React.FC = () => {
    return (
        <section className="flex min-h-[40vh] w-full flex-col items-center justify-center gap-3 bg-gradient-to-b from-slate-600  to-[#111827] p-2 sm:p-5">
            <h2 className="text-center text-3xl text-white sm:text-6xl">
                –°–ø–µ—Ü–∏–∞–ª–Ω–æ—Å—Ç–∏
            </h2>
            <div className="flex h-fit w-full flex-wrap items-center justify-center gap-10 px-4 py-3 sm:px-8">
                {profiles.map((item, index) => (
                    <div key={index} className="relative h-[450px] w-[350px] hover:scale-110 transition-transform duration-300">
                        <div
                            className={cn(
                                "absolute inset-0 flex flex-col items-center justify-center gap-3 rounded-xl border-y-8 border-amber-400 bg-white bg-cover",
                                item.image,
                            )}
                        >
                            <div className="flex h-full w-full items-center justify-between flex-col bg-opacity-30 bg-gradient-to-t from-black to-transparent to-70% p-2 text-white">
                                {item.icon}
                                <p className="text-center text-lg font-bold">
                                    {item.type}
                                </p>
                            </div>
                        </div>
                        <a
                            className="absolute inset-0 flex transform cursor-pointer flex-col items-center justify-center rounded-xl gap-2 bg-black/40 p-4 text-center text-xl text-white opacity-0 transition-opacity hover:opacity-100"
                            href={item.pdf}
                            target="_blank"
                            rel="noopener noreferrer"
                            download
                        >
                            –ò–∑—Ç–µ–≥–ª–∏ PDF
                        </a>
                    </div>
                ))}
            </div>
            <p className="flex gap-2 text-gray-400">
                –ó–∞ –ø–æ–≤–µ—á–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–µ —Å–≤—ä—Ä–∂–µ—Ç–µ —Å –Ω–∞—Å –Ω–∞
                <span className="flex cursor-pointer gap-1 text-blue-500 underline underline-offset-2">
                    <Phone /> +359 893 344 538
                </span>
            </p>
        </section>
    );
};
const ContactSection: React.FC = () => (
    <section className="h-fit w-full">
        {/* <h3 className="w-full p-3 text-center text-4xl underline  decoration-4 sm:text-left lg:text-6xl">
            –°–≤—ä—Ä–∂–µ—Ç–µ —Å–µ —Å –Ω–∞—Å
        </h3> */}
        <div className="flex h-fit w-full justify-center bg-gray-900">
            <Link
                href="https://maps.app.goo.gl/PCDdCJbaF5vfMTY98"
                className="relative h-fit w-fit
           
             before:absolute
             before:right-0
             before:top-0
             before:h-full
             before:w-full
             before:bg-[linear-gradient(90deg,transparent_0_90%,#111827_100%)] 
             before:content-['']
        
            after:absolute after:left-0 after:top-0 after:h-full after:w-full after:bg-[linear-gradient(270deg,transparent_0_90%,#111827_100%)] after:content-['']
    "
            >
                <img
                    src={"/map.png"}
                    className="h-auto w-full border-y-4 border-yellow-500"
                />
            </Link>
        </div>
        {/* <div className="flex w-full flex-col gap-2 bg-white sm:flex-row h-full">
           
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2908.3079355977425!2d27.916657411454345!3d43.20303018131007!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x40a453f471687209%3A0xf1a81062daaa8d89!2z0KfQsNGB0YLQvdCwINGC0YrRgNCz0L7QstGB0LrQsCDQs9C40LzQvdCw0LfQuNGP!5e0!3m2!1sbg!2sbg!4v1703864908152!5m2!1sbg!2sbg"
            
            <ContactForm />
        </div> */}
    </section>
);
